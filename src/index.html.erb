<!DOCTYPE html>
<html>
  <head>
    <!-- Probably always a good idea to be utf-8 -->
    <meta charset="utf-8">

    <meta name="viewport" content="width=device-width, initial-scale=1">

    <!-- So iPads can view the app in full screen -->
    <meta name="apple-mobile-web-app-capable" content="yes">
    <!-- This prevents Internet Explorer from entering 'quirks' mode -->
    <meta content='IE=edge' http-equiv='X-UA-Compatible'>
    <!-- Change the title to one for your own country -->
    <title>2050 Pathways Calculator</title>

   <link href="https://fonts.googleapis.com/css?family=Open+Sans" rel="stylesheet">

    <!-- assets is a function definied in the Helper module in src/server.rb -->
    <link href='/assets/<%= assets['application.css']%>' media='screen' rel='stylesheet' type='text/css' />
    <!--     <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css">
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css">  -->
    <!--
    <link rel="stylesheet" href='/assets/<%= assets['BootSideMenu.css']%>' media='screen' type='text/css' />
    -->
    <script src='/assets/<%= assets['application.js']%>' type='text/javascript'></script>
    <!-- Change the Google Analytics code to one for your own country-->
    <script>
      var _gaq = _gaq || [];
      _gaq.push(['_setAccount', 'UA-17161700-2']);
      _gaq.push(['_trackPageview']);
      (function() {
        var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
        ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
        var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
      })();
    </script>


  </head>

  <body>

    <!-- Other countries may want to delete this warning. It is hidden initially by css in src/stylesheets/body.css
      Code in the checkSVGWorks function in src/javascripts/controller.js checks if the user's web browser
      supports SVG and, if it doesn't, shows this div.  -->
    <div id='svgWarn'>
      This interface requires <a href='http://caniuse.com/#cats=SVG'>a browser that supports SVG.</a> it seems like your browser doesn't support SVG. We have an <a href='http://uk-old.2050.org.uk'>old version of this calculator</a> that may work for you. Alternatively you can download <a href='http://2050-calculator-tool-wiki.decc.gov.uk/pages/140'>an excel version.</a>
      <p>
        <a href='#' onclick="$('#svgWarn').hide()">Hide this message.</a>
      </p>
    </div>

    <div id='topbar' style="margin-left:-465px;position:fixed;width:100%;margin-top: -30px;">

      <div id='name'>
        <!-- Change this to link to your country website -->
        <a href='https://www.pik-potsdam.de/~kriewald' style="font-weight: bold;">The UK 2050 Calculator</a>
      </div>

      <!-- To add or remove views from the web tool, alter the following section -->
      <div id='views'>
        <a class='view' data-view='primary_energy_chart' href='#'>Energy</a>
        <a class='view' data-view='electricity' href='#'>Electricity</a>
        <a class='view' data-view='energy_security' href='#'>Security</a>
        <a class='view' data-view='sankey' href='#'>Flows</a>
        <a class='view' data-view='map' href='#'>Map</a>
        <a class='view' data-view='story' href='#'>Story</a>
        <a class='newdropdown' data-dropdown='#cost_choices' href='#' id='cost_choice'>Costs</a>
        <a class='view' data-view='air_quality' href='#'>Air</a>
        <a class='view' data-view='share' href='#'>Share</a>
        <!-- Change this to link to your own country website documentation -->
        <a href='http://2050-calculator-tool-wiki.decc.gov.uk'>Docs</a>
      </div>
    </div>

    <div class='dropdown' id='cost_choices'>
      <a class='view' data-view='costs_in_context' href='#'>In context</a>
      <a class='view' data-view='costs_compared_overview' href='#'>Compared</a>
      <a class='view' data-view='costs_sensitivity' href='#'>Sensitivity</a>
    </div>

    <div class='dropdown' id='savedpathway_choices'>
      <!-- These are taken from the underlying spreadsheet -->
      <% structure.example_pathways.each do |pathway| %>
        <a href='#' onclick="twentyfifty.switchPathway('<%= pathway[:code] %>');$('ul#savedpathway_choices').toggle()"><%= pathway[:name] %></a>
      <% end %>
      <!-- Change this to point to your local website -->
      <a href='http://2050-calculator-tool-wiki.decc.gov.uk/pages/122'>More&hellip;</a>
    </div>
    <!-- This appears while the tool is waiting for data from the server -->
    <div id='calculating'>
      <span>Calculating</span>
    </div>
    <!-- / The charts will be drawn in this block -->
    <div id='results' style="margin-top:35px;"></div>
    <!-- / bof navpanel -->
    <div id='gauge'  style="position:fixed;top:100px;right:20px;">
    <div id="slider-vertical" style="height: 80vh;"></div>

    <script>
      var verticalSlider = document.getElementById('slider-vertical');

      noUiSlider.create(verticalSlider, {
        connect: [false, true],
        tooltips: [wNumb({
            decimals: 0,
            suffix: '%'
          })
        ],
        pips: {
      		mode: 'values',
          values: [0,-80,-90],
      		density: 10,
          format: wNumb({
      			decimals: 0,
      			suffix: '%'
      		})
      	},
      	start: -40,
        direction: 'rtl',
      	orientation: 'vertical',
      	range: {
      		'min': -100,
      		'max': 0
      	},
        cssPrefix: 'noUi-', // defaults to 'noUi-',
    		cssClasses: {
    			// Full list of classnames to override.
    			// Does NOT extend the default classes.
    			// Have a look at the source for the full, current list:
    			// https://github.com/leongersen/noUiSlider/blob/master/src/js/options.js#L398
    				target: 'target',
    				base: 'Gbase',
    				origin: 'origin',
    				handle: 'Ghandle',
    				handleLower: 'handle-lower',
    				handleUpper: 'handle-upper',
    				horizontal: 'horizontal',
    				vertical: 'vertical',
    				background: 'background',
    				connect: 'Gconnect',
    				connects: 'connects',
    				ltr: 'ltr',
    				rtl: 'rtl',
    				draggable: 'draggable',
    				drag: 'state-drag',
    				tap: 'state-tap',
    				active: 'active',
    				tooltip: 'Gtooltip',
    				pips: 'pips',
    				pipsHorizontal: 'pips-horizontal',
    				pipsVertical: 'pips-vertical',
    				marker: 'marker',
    				markerHorizontal: 'marker-horizontal',
    				markerVertical: 'marker-vertical',
    				markerNormal: 'marker-normal',
    				markerLarge: 'marker-large',
    				markerSub: 'marker-sub',
    				value: 'value',
    				valueHorizontal: 'value-horizontal',
    				valueVertical: 'value-vertical',
    				valueNormal: 'value-normal',
    				valueLarge: 'value-large',
    				valueSub: 'value-sub'
    		}
      });

      </script>
    </div>


    <div id='lever_nav_panel'  style="margin-top:40px;">

      <div id='examples'>
        <a class='buttonMode newdropdown' style="position: absolute; top:10px; left:-5px;" data-dropdown='#savedpathway_choices' href='#'>Examples</a>
        <!-- the contents of this dropdown is defined in the #savedpathway_choices div below -->
      </div>

    <!-- / These are the controls -->
    <div id='classic_controls'>

      <div id='accordion'>
<div class= "accordion-toggle">

<table class="fixed">
  <tr class='menuWidth'>
<td class='name'></td>
<td class='gap'></td>
<td colspan=4 style="font-size:small;color:#ccd6e0;text-align: center;">

    level of ambition

</td>
<td class='date-choice-mode-2100-wrapper' style="font-size:x-small;color:#ccd6e0;padding-left:38px;">start and end year</td>
</tr>
	  	  <tr class='menuWidth'>
	    <td class='name'></td>
	    <td class='gap'></td>
	    <td class='menuLevelWidth'>1</td>
	    <td class='menuLevelWidth'>2</td>
	    <td class='menuLevelWidth'>3</td>
	    <td class='menuLevelWidth'>4</td>
	    <td class='date-choice-mode-2100-wrapper' style="font-size:x-small;color:#ccd6e0;padding-left:44px;">2020 2050 2100</td>
	  </tr>

<tr>
<td style="margin:0;background-color:#7f99b2;padding:4px">
      <!-- The left column -->
      <h5>Demand</h5>
</td>
<td class='gap'></td>
<td colspan=4>

     <div class="rotate"><div id="demanddb" class="demanddb">âŒš</div></div>

</td>

	    <td class='date-choice-mode-2100-wrapper' style="height:47px;text-align: center;">
<div id='demand-header' class="date-choice-mode-2100-default" style="width:150px;height:100%;">
<div class="dates-column">
<div class="dates-column-left"></div>
<div class="dates-column-right"></div>
<div class="dates-column-center">&nbsp</div>
</div>
</div>
	    </td>

</tr></table>

</div>
     <div id='demand' class="accordion-content default" style="display: none">

	<table class="fixed">
		<tr class='menuWidth'>
		    <td class='name'></td>
		    <td class='gap'></td>
		    <td class='menuLevelWidth'></td>
		    <td class='menuLevelWidth'></td>
		    <td class='menuLevelWidth'></td>
		    <td class='menuLevelWidth'></td>
		    <td style="width:150px;text-align: center;"></td>
	  	</tr>


          <!-- One row per choice -->
          <% structure.choices[21..34].each do |choice| %>
            <tr class='<%= choice.incremental_or_alternative %>' id='r<%= choice.number %>'>
              <td class='name'>
		<a href='/assets/onepage/<%= choice.doc %>' target='_new' -data-choicenumber='<%= choice.number %>' title= '<%= choice.name %>' class='leverNameLink' >
                  <%= choice.name %>
                </a>
              </td>
		    <td class='gap'>
	    </td>
              <!-- One cell per level for that choice -->
              <% choice.levels.each.with_index do |level,i| %>
                <td class='choice'>
                  <a href='#' data-choicenumber='<%= choice.number %>' data-choicelevel='<%= i+1 %>' id='c<%= choice.number %>l<%= i+1%>' title='<%= choice.descriptions[i] %>' class='choiceLink' data-group='demand'>
                    <%= level %>
                </a>
              </td>

		<% if i == 3 %>
	      <td class='date-choice-mode-2100-wrapper' style="width:150px;">
		<div id='cd<%= choice.number %>' class="date-choice-mode-2100-default" style="width:150px;">
<script>
var sliderSlider<%= choice.number %> = document.getElementById('slider<%= choice.number %>');
noUiSlider.create(sliderSlider<%= choice.number %>, {start: [ 2020, 2050],step: 5,connect: true,range: {'min':  2020,'max':  2100}});
slider<%= choice.number %>.setAttribute('disabled', true);
</script>

<div class="dates-column">
<div class="dates-column-left">
		<div class="dropdown-dates">
 		<button class="dropbtn-dates sd">2020</button>
		  <div class="dropdown-content-dates">
			<a href="#" class='dateChoiceLink' data-datechoice='2020' data-choicenumber='<%= choice.number %>'>2020</a>
			<a href="#" class='dateChoiceLink' data-datechoice='2025' data-choicenumber='<%= choice.number %>'>2025</a>
			<a href="#" class='dateChoiceLink' data-datechoice='2030' data-choicenumber='<%= choice.number %>'>2030</a>
			<a href="#" class='dateChoiceLink' data-datechoice='2035' data-choicenumber='<%= choice.number %>'>2035</a>
			<a href="#" class='dateChoiceLink' data-datechoice='2040' data-choicenumber='<%= choice.number %>'>2040</a>
			<a href="#" class='dateChoiceLink' data-datechoice='2045' data-choicenumber='<%= choice.number %>'>2045</a>
			<a href="#" class='dateChoiceLink' data-datechoice='2050' data-choicenumber='<%= choice.number %>'>2050</a>
			<a href="#" class='dateChoiceLink' data-datechoice='2055' data-choicenumber='<%= choice.number %>'>2055</a>
			<a href="#" class='dateChoiceLink' data-datechoice='2060' data-choicenumber='<%= choice.number %>'>2060</a>
			<a href="#" class='dateChoiceLink' data-datechoice='2065' data-choicenumber='<%= choice.number %>'>2065</a>
			<a href="#" class='dateChoiceLink' data-datechoice='2070' data-choicenumber='<%= choice.number %>'>2070</a>
			<a href="#" class='dateChoiceLink' data-datechoice='2075' data-choicenumber='<%= choice.number %>'>2075</a>
			<a href="#" class='dateChoiceLink' data-datechoice='2080' data-choicenumber='<%= choice.number %>'>2080</a>
			<a href="#" class='dateChoiceLink' data-datechoice='2085' data-choicenumber='<%= choice.number %>'>2085</a>
			<a href="#" class='dateChoiceLink' data-datechoice='2090' data-choicenumber='<%= choice.number %>'>2090</a>
		  </div>
		</div>
</div>
<div class="dates-column-right">
		<div class="dropdown-dates">
 		<button class="dropbtn-dates ed">2050</button>
		  <div class="dropdown-content-dates">
			<a href="#" class='dateChoiceLink' data-datechoice='2030' data-choicenumber='<%= choice.number %>'>2030</a>
			<a href="#" class='dateChoiceLink' data-datechoice='2035' data-choicenumber='<%= choice.number %>'>2035</a>
			<a href="#" class='dateChoiceLink' data-datechoice='2040' data-choicenumber='<%= choice.number %>'>2040</a>
			<a href="#" class='dateChoiceLink' data-datechoice='2045' data-choicenumber='<%= choice.number %>'>2045</a>
			<a href="#" class='dateChoiceLink' data-datechoice='2050' data-choicenumber='<%= choice.number %>'>2050</a>
			<a href="#" class='dateChoiceLink' data-datechoice='2055' data-choicenumber='<%= choice.number %>'>2055</a>
			<a href="#" class='dateChoiceLink' data-datechoice='2060' data-choicenumber='<%= choice.number %>'>2060</a>
			<a href="#" class='dateChoiceLink' data-datechoice='2065' data-choicenumber='<%= choice.number %>'>2065</a>
			<a href="#" class='dateChoiceLink' data-datechoice='2070' data-choicenumber='<%= choice.number %>'>2070</a>
			<a href="#" class='dateChoiceLink' data-datechoice='2075' data-choicenumber='<%= choice.number %>'>2075</a>
			<a href="#" class='dateChoiceLink' data-datechoice='2080' data-choicenumber='<%= choice.number %>'>2080</a>
			<a href="#" class='dateChoiceLink' data-datechoice='2085' data-choicenumber='<%= choice.number %>'>2085</a>
			<a href="#" class='dateChoiceLink' data-datechoice='2090' data-choicenumber='<%= choice.number %>'>2090</a>
			<a href="#" class='dateChoiceLink' data-datechoice='2095' data-choicenumber='<%= choice.number %>'>2095</a>
			<a href="#" class='dateChoiceLink' data-datechoice='2100' data-choicenumber='<%= choice.number %>'>2100</a>
		  </div>
		</div>
		</div>
</div>
<div class="dates-column-center">&nbsp<div id="slider<%= choice.number %>"></div>
</div>


</div> <!-- dates column-->
</div>
 	      </td>

		  <% end %>
		  <% end %>
            </tr>
            <% end %>
	</table>

<!--
	<a href="#" class= "accordion-toggle">COMMERCIAL</a>
        <div class="accordion-content default" style="display: none">
	  <table class="fixed">
	    	  <tr class='menuWidthL2'>
	    <td class='nameL2'>
	    </td>
	    <td class='menuLevelWidth'>
	    </td>
	    <td class='menuLevelWidth'>
	    </td>
	    <td class='menuLevelWidth'>
	    </td>
	    <td class='menuLevelWidth'>
	    </td>
	    <td class='menuLevelWidth'>
	    </td>
	  </tr>

            <% structure.choices[35..39].each do |choice| %>
            <tr class='<%= choice.incremental_or_alternative %>' id='r<%= choice.number %>'>
              <td class='name nameL2'>
                <a href='/assets/onepage/<%= choice.doc %>' target='_new' data-choicenumber='<%= choice.number %>' title= '<%= choice.name %>' class='leverNameLink'>
                  <%= choice.name %>
                </a>
              </td>
              <!-- One cell per level for that choice -@>
              <% choice.levels.each.with_index do |level,i| %>
                <td class='choice'>
                  <a href='#' data-choicenumber='<%= choice.number %>' data-choicelevel='<%= i+1 %>' id='c<%= choice.number %>l<%= i+1%>' title='<%= choice.descriptions[i] %>' class='choiceLink' >
                    <%= level %>
                </a>
		</td>
		<% if i == 3 %>
	      <td class='date-choice-mode-2100-wrapper'>
		<div id='cd<%= choice.number %>' class="date-choice-mode-2100-default">
	      <!--
	      <img src="/assets/images/clock.svg" alt="custom-level" width = "16" onclick="jQuery(function ($) {$('#settingsModal').modal();});">
	      -@>

		<script>

var sliderSlider<%= choice.number %> = document.getElementById('slider<%= choice.number %>');

noUiSlider.create(sliderSlider<%= choice.number %>, {
	start: [ 2020, 2050],
	step: 5,
//	behaviour: 'snap', //https://refreshless.com/nouislider/behaviour-option/
	connect: true,
	range: {
		'min':  2020,
		'max':  2100
	}
});
slider<%= choice.number %>.setAttribute('disabled', true); //https://refreshless.com/nouislider/more/#section-styling
</script>

<table class="fixed"><tr style="padding-bottom: 0;padding-top: 0;">
<td>
		<div class="dropdown-dates">
 		<button class="dropbtn-dates sd">2020</button>
		  <div class="dropdown-content-dates">
			<a href="#" class='dateChoiceLink' data-datechoice='2020' data-choicenumber='<%= choice.number %>'>2020</a>
			<a href="#" class='dateChoiceLink' data-datechoice='2025' data-choicenumber='<%= choice.number %>'>2025</a>
			<a href="#" class='dateChoiceLink' data-datechoice='2030' data-choicenumber='<%= choice.number %>'>2030</a>
			<a href="#" class='dateChoiceLink' data-datechoice='2035' data-choicenumber='<%= choice.number %>'>2035</a>
			<a href="#" class='dateChoiceLink' data-datechoice='2040' data-choicenumber='<%= choice.number %>'>2040</a>
			<a href="#" class='dateChoiceLink' data-datechoice='2045' data-choicenumber='<%= choice.number %>'>2045</a>
			<a href="#" class='dateChoiceLink' data-datechoice='2050' data-choicenumber='<%= choice.number %>'>2050</a>
			<a href="#" class='dateChoiceLink' data-datechoice='2055' data-choicenumber='<%= choice.number %>'>2055</a>
			<a href="#" class='dateChoiceLink' data-datechoice='2060' data-choicenumber='<%= choice.number %>'>2060</a>
			<a href="#" class='dateChoiceLink' data-datechoice='2065' data-choicenumber='<%= choice.number %>'>2065</a>
			<a href="#" class='dateChoiceLink' data-datechoice='2070' data-choicenumber='<%= choice.number %>'>2070</a>
			<a href="#" class='dateChoiceLink' data-datechoice='2075' data-choicenumber='<%= choice.number %>'>2075</a>
			<a href="#" class='dateChoiceLink' data-datechoice='2080' data-choicenumber='<%= choice.number %>'>2080</a>
			<a href="#" class='dateChoiceLink' data-datechoice='2085' data-choicenumber='<%= choice.number %>'>2085</a>
			<a href="#" class='dateChoiceLink' data-datechoice='2090' data-choicenumber='<%= choice.number %>'>2090</a>
		  </div>
		</div>
</td>
<td>		<div id="slider<%= choice.number %>" style="width:150px; padding: 0px 10px;"></div></td>
<td>		<div class="dropdown-dates">
 		<button class="dropbtn-dates ed">2050</button>
		  <div class="dropdown-content-dates">
			<a href="#" class='dateChoiceLink' data-datechoice='2030' data-choicenumber='<%= choice.number %>'>2030</a>
			<a href="#" class='dateChoiceLink' data-datechoice='2035' data-choicenumber='<%= choice.number %>'>2035</a>
			<a href="#" class='dateChoiceLink' data-datechoice='2040' data-choicenumber='<%= choice.number %>'>2040</a>
			<a href="#" class='dateChoiceLink' data-datechoice='2045' data-choicenumber='<%= choice.number %>'>2045</a>
			<a href="#" class='dateChoiceLink' data-datechoice='2050' data-choicenumber='<%= choice.number %>'>2050</a>
			<a href="#" class='dateChoiceLink' data-datechoice='2055' data-choicenumber='<%= choice.number %>'>2055</a>
			<a href="#" class='dateChoiceLink' data-datechoice='2060' data-choicenumber='<%= choice.number %>'>2060</a>
			<a href="#" class='dateChoiceLink' data-datechoice='2065' data-choicenumber='<%= choice.number %>'>2065</a>
			<a href="#" class='dateChoiceLink' data-datechoice='2070' data-choicenumber='<%= choice.number %>'>2070</a>
			<a href="#" class='dateChoiceLink' data-datechoice='2075' data-choicenumber='<%= choice.number %>'>2075</a>
			<a href="#" class='dateChoiceLink' data-datechoice='2080' data-choicenumber='<%= choice.number %>'>2080</a>
			<a href="#" class='dateChoiceLink' data-datechoice='2085' data-choicenumber='<%= choice.number %>'>2085</a>
			<a href="#" class='dateChoiceLink' data-datechoice='2090' data-choicenumber='<%= choice.number %>'>2090</a>
			<a href="#" class='dateChoiceLink' data-datechoice='2095' data-choicenumber='<%= choice.number %>'>2095</a>
			<a href="#" class='dateChoiceLink' data-datechoice='2100' data-choicenumber='<%= choice.number %>'>2100</a>
		  </div>
		</div>
		</div>


</td></tr></table>
 	      </td>
		<% end %>
	      <% end %>
            </tr>
            <% end %>

        </table>
	</div>
-->
      </div>


<!-- The middle column -->

<!-- Supply header table -->

<div class= "accordion-toggle">

<table class="fixed">

	  	  <tr class='menuWidth' style="height:0;">
	    <td class='name' style="height:0;"></td>
	    <td class='gap'></td>
	    <td class='menuLevelWidth'></td>
	    <td class='menuLevelWidth'></td>
	    <td class='menuLevelWidth'></td>
	    <td class='menuLevelWidth'></td>
	    <td class='date-choice-mode-2100-wrapper' style="height:0;font-size:x-small;color:#ccd6e0;padding-left:44px;"></td>
	  </tr>

<tr>
<td style="margin:0;background-color:#7f99b2;padding:4px">
      <!-- The left column  &<br>GHG reduction-->
      <!--<h5 style="font-family: Arial Narrow;">Energy conversion & GHG reduction</h5>-->
      <h5>Supply</h5>
</td>
<td class='gap'></td>
<td colspan=4>

     <div class="rotate"><div id="supplydb" class="supplydb">âŒš</div></div>

</td>

	    <td class='date-choice-mode-2100-wrapper' style="height:47px;text-align: center;">
		<div id='supply-header' class="date-choice-mode-2100-default" style="width:150px;height:100%;">
			<div class="dates-column">
				<div class="dates-column-left"></div>
				<div class="dates-column-right"></div>
				<div class="dates-column-center">&nbsp</div>
			</div>
		</div>
	    </td>

</tr></table>

</div>

<!-- End of Supply header table -->

      <div id='supply' class="accordion-content default" style="display: none">
        <table class="fixed">

		<tr class='menuWidth'>
		    <td class='name'></td>
		    <td class='gap'></td>
		    <td class='menuLevelWidth'></td>
		    <td class='menuLevelWidth'></td>
		    <td class='menuLevelWidth'></td>
		    <td class='menuLevelWidth'></td>
		    <td style="width:150px;text-align: center;"></td>
	  	</tr>


          <% structure.choices[0..20].each do |choice| %>
            <tr class='<%= choice.incremental_or_alternative %>' id='r<%= choice.number %>' >
              <td class='name lever-grey'>
                <a href='/assets/onepage/<%= choice.doc %>' target='_new' data-choicenumber='<%= choice.number %>' title= '<%= choice.name %>' class='leverNameLink'>
                  <%= choice.name %>
                </a>
              </td>
<td class='gap'></td>
              <!-- One cell per level for that choice -->
              <% choice.levels.each.with_index do |level,i| %>
                <td class='choice'>
                  <a href='#' data-choicenumber='<%= choice.number %>' data-choicelevel='<%= i+1 %>' id='c<%= choice.number %>l<%= i+1%>' title='<%= choice.descriptions[i] %>' class='choiceLink' data-group='supply'>
                    <%= level %>
                </a>
              </td>
		<% if i == 3 %>
	      <td class='date-choice-mode-2100-wrapper'>
		<div id='cd<%= choice.number %>' class="date-choice-mode-2100-default" style="width:150px;">
<script>
var sliderSlider<%= choice.number %> = document.getElementById('slider<%= choice.number %>');
noUiSlider.create(sliderSlider<%= choice.number %>, {start: [ 2020, 2050],step: 5,connect: true,range: {'min':  2020,'max':  2100}});
slider<%= choice.number %>.setAttribute('disabled', true); //https://refreshless.com/nouislider/more/#section-styling
</script>

<div class="dates-column">
<div class="dates-column-left">
		<div class="dropdown-dates">
 		<button class="dropbtn-dates sd">2020</button>
		  <div class="dropdown-content-dates">
			<a href="#" class='dateChoiceLink' data-datechoice='2020' data-choicenumber='<%= choice.number %>'>2020</a>
			<a href="#" class='dateChoiceLink' data-datechoice='2025' data-choicenumber='<%= choice.number %>'>2025</a>
			<a href="#" class='dateChoiceLink' data-datechoice='2030' data-choicenumber='<%= choice.number %>'>2030</a>
			<a href="#" class='dateChoiceLink' data-datechoice='2035' data-choicenumber='<%= choice.number %>'>2035</a>
			<a href="#" class='dateChoiceLink' data-datechoice='2040' data-choicenumber='<%= choice.number %>'>2040</a>
			<a href="#" class='dateChoiceLink' data-datechoice='2045' data-choicenumber='<%= choice.number %>'>2045</a>
			<a href="#" class='dateChoiceLink' data-datechoice='2050' data-choicenumber='<%= choice.number %>'>2050</a>
			<a href="#" class='dateChoiceLink' data-datechoice='2055' data-choicenumber='<%= choice.number %>'>2055</a>
			<a href="#" class='dateChoiceLink' data-datechoice='2060' data-choicenumber='<%= choice.number %>'>2060</a>
			<a href="#" class='dateChoiceLink' data-datechoice='2065' data-choicenumber='<%= choice.number %>'>2065</a>
			<a href="#" class='dateChoiceLink' data-datechoice='2070' data-choicenumber='<%= choice.number %>'>2070</a>
			<a href="#" class='dateChoiceLink' data-datechoice='2075' data-choicenumber='<%= choice.number %>'>2075</a>
			<a href="#" class='dateChoiceLink' data-datechoice='2080' data-choicenumber='<%= choice.number %>'>2080</a>
			<a href="#" class='dateChoiceLink' data-datechoice='2085' data-choicenumber='<%= choice.number %>'>2085</a>
			<a href="#" class='dateChoiceLink' data-datechoice='2090' data-choicenumber='<%= choice.number %>'>2090</a>
		  </div>
		</div>
</div>
<div class="dates-column-right">
		<div class="dropdown-dates">
 		<button class="dropbtn-dates ed">2050</button>
		  <div class="dropdown-content-dates">
			<a href="#" class='dateChoiceLink' data-datechoice='2030' data-choicenumber='<%= choice.number %>'>2030</a>
			<a href="#" class='dateChoiceLink' data-datechoice='2035' data-choicenumber='<%= choice.number %>'>2035</a>
			<a href="#" class='dateChoiceLink' data-datechoice='2040' data-choicenumber='<%= choice.number %>'>2040</a>
			<a href="#" class='dateChoiceLink' data-datechoice='2045' data-choicenumber='<%= choice.number %>'>2045</a>
			<a href="#" class='dateChoiceLink' data-datechoice='2050' data-choicenumber='<%= choice.number %>'>2050</a>
			<a href="#" class='dateChoiceLink' data-datechoice='2055' data-choicenumber='<%= choice.number %>'>2055</a>
			<a href="#" class='dateChoiceLink' data-datechoice='2060' data-choicenumber='<%= choice.number %>'>2060</a>
			<a href="#" class='dateChoiceLink' data-datechoice='2065' data-choicenumber='<%= choice.number %>'>2065</a>
			<a href="#" class='dateChoiceLink' data-datechoice='2070' data-choicenumber='<%= choice.number %>'>2070</a>
			<a href="#" class='dateChoiceLink' data-datechoice='2075' data-choicenumber='<%= choice.number %>'>2075</a>
			<a href="#" class='dateChoiceLink' data-datechoice='2080' data-choicenumber='<%= choice.number %>'>2080</a>
			<a href="#" class='dateChoiceLink' data-datechoice='2085' data-choicenumber='<%= choice.number %>'>2085</a>
			<a href="#" class='dateChoiceLink' data-datechoice='2090' data-choicenumber='<%= choice.number %>'>2090</a>
			<a href="#" class='dateChoiceLink' data-datechoice='2095' data-choicenumber='<%= choice.number %>'>2095</a>
			<a href="#" class='dateChoiceLink' data-datechoice='2100' data-choicenumber='<%= choice.number %>'>2100</a>
		  </div>
		</div>
		</div>
</div>
<div class="dates-column-center">&nbsp<div id="slider<%= choice.number %>"></div>
</div>


</div> <!-- dates column-->
</div>
 	      </td>

		  <% end %>
		  <% end %>
            </tr>
          <% end %>
        </table>
      </div>

      <!-- The right column -->


<!-- other header table -->

<div class= "accordion-toggle">

<table class="fixed">

	 <tr class='menuWidth' style="height:0;">
	    <td class='name' style="height:0;"></td>
	    <td class='gap'></td>
	    <td class='menuLevelWidth'></td>
	    <td class='menuLevelWidth'></td>
	    <td class='menuLevelWidth'></td>
	    <td class='menuLevelWidth'></td>
	    <td class='date-choice-mode-2100-wrapper' style="height:0;font-size:x-small;color:#ccd6e0;padding-left:44px;"></td>
	  </tr>

<tr>
<td style="margin:0;background-color:#7f99b2;padding:4px">
      <!-- The left column -->
      <h5>Other</h5>
</td>
<td class='gap'></td>
<td colspan=4>

     <div class="rotate"><div id="otherdb" class="otherdb">âŒš</div></div>

</td>

	    <td class='date-choice-mode-2100-wrapper' style="height:47px;text-align: center;">
<div id='other-header' class="date-choice-mode-2100-default" style="width:150px;height:100%;">
<div class="dates-column">
<div class="dates-column-left"></div>
<div class="dates-column-right"></div>
<div class="dates-column-center">&nbsp</div>
</div>
</div>
	    </td>

</tr></table>

</div>

<!-- End of other header table -->

     <div id='other' class="accordion-content default" style="display: none">
        <table class="fixed">

	  <tr class='menuWidth'>
		    <td class='name'></td>
		    <td class='gap'></td>
		    <td class='menuLevelWidth'></td>
		    <td class='menuLevelWidth'></td>
		    <td class='menuLevelWidth'></td>
		    <td class='menuLevelWidth'></td>
		    <td style="width:150px;text-align: center;"></td>
	  </tr>

	      <!-- this should actually go up to choice 42, but that isn't ready for prime time yet -->
          <% structure.choices[40..41].each do |choice| %>
            <tr class='<%= choice.incremental_or_alternative %>' id='r<%= choice.number %>' style="padding-bottom: 0;padding-top: 0;">
              <td class='name lever-grey'>
                <a href='/assets/onepage/<%= choice.doc %>' target='_new' data-choicenumber='<%= choice.number %>' title= '<%= choice.name %>' class='leverNameLink'>
                  <%= choice.name %>
                </a>
              </td>
<td class='gap'></td>
              <!-- One cell per level for that choice -->
              <% choice.levels.each.with_index do |level,i| %>
                <td class='choice'>
                  <a href='#' data-choicenumber='<%= choice.number %>' data-choicelevel='<%= i+1 %>' id='c<%= choice.number %>l<%= i+1%>' title='<%= choice.descriptions[i] %>' class='choiceLink' data-group='other'>
                    <%= level %>
                </a>
              </td>

		<% if i == 3 %>
	      <td class='date-choice-mode-2100-wrapper'>
		<div id='cd<%= choice.number %>' class="date-choice-mode-2100-default" style="width:150px;">
<script>
var sliderSlider<%= choice.number %> = document.getElementById('slider<%= choice.number %>');
noUiSlider.create(sliderSlider<%= choice.number %>, {start: [ 2020, 2050],step: 5,connect: true,range: {'min':  2020,'max':  2100}});
slider<%= choice.number %>.setAttribute('disabled', true); //https://refreshless.com/nouislider/more/#section-styling
</script>

<div class="dates-column">
<div class="dates-column-left">
		<div class="dropdown-dates">
 		<button class="dropbtn-dates sd">2020</button>
		  <div class="dropdown-content-dates">
			<a href="#" class='dateChoiceLink' data-datechoice='2020' data-choicenumber='<%= choice.number %>'>2020</a>
			<a href="#" class='dateChoiceLink' data-datechoice='2025' data-choicenumber='<%= choice.number %>'>2025</a>
			<a href="#" class='dateChoiceLink' data-datechoice='2030' data-choicenumber='<%= choice.number %>'>2030</a>
			<a href="#" class='dateChoiceLink' data-datechoice='2035' data-choicenumber='<%= choice.number %>'>2035</a>
			<a href="#" class='dateChoiceLink' data-datechoice='2040' data-choicenumber='<%= choice.number %>'>2040</a>
			<a href="#" class='dateChoiceLink' data-datechoice='2045' data-choicenumber='<%= choice.number %>'>2045</a>
			<a href="#" class='dateChoiceLink' data-datechoice='2050' data-choicenumber='<%= choice.number %>'>2050</a>
			<a href="#" class='dateChoiceLink' data-datechoice='2055' data-choicenumber='<%= choice.number %>'>2055</a>
			<a href="#" class='dateChoiceLink' data-datechoice='2060' data-choicenumber='<%= choice.number %>'>2060</a>
			<a href="#" class='dateChoiceLink' data-datechoice='2065' data-choicenumber='<%= choice.number %>'>2065</a>
			<a href="#" class='dateChoiceLink' data-datechoice='2070' data-choicenumber='<%= choice.number %>'>2070</a>
			<a href="#" class='dateChoiceLink' data-datechoice='2075' data-choicenumber='<%= choice.number %>'>2075</a>
			<a href="#" class='dateChoiceLink' data-datechoice='2080' data-choicenumber='<%= choice.number %>'>2080</a>
			<a href="#" class='dateChoiceLink' data-datechoice='2085' data-choicenumber='<%= choice.number %>'>2085</a>
			<a href="#" class='dateChoiceLink' data-datechoice='2090' data-choicenumber='<%= choice.number %>'>2090</a>
		  </div>
		</div>
</div>
<div class="dates-column-right">
		<div class="dropdown-dates">
 		<button class="dropbtn-dates ed">2050</button>
		  <div class="dropdown-content-dates">
			<a href="#" class='dateChoiceLink' data-datechoice='2030' data-choicenumber='<%= choice.number %>'>2030</a>
			<a href="#" class='dateChoiceLink' data-datechoice='2035' data-choicenumber='<%= choice.number %>'>2035</a>
			<a href="#" class='dateChoiceLink' data-datechoice='2040' data-choicenumber='<%= choice.number %>'>2040</a>
			<a href="#" class='dateChoiceLink' data-datechoice='2045' data-choicenumber='<%= choice.number %>'>2045</a>
			<a href="#" class='dateChoiceLink' data-datechoice='2050' data-choicenumber='<%= choice.number %>'>2050</a>
			<a href="#" class='dateChoiceLink' data-datechoice='2055' data-choicenumber='<%= choice.number %>'>2055</a>
			<a href="#" class='dateChoiceLink' data-datechoice='2060' data-choicenumber='<%= choice.number %>'>2060</a>
			<a href="#" class='dateChoiceLink' data-datechoice='2065' data-choicenumber='<%= choice.number %>'>2065</a>
			<a href="#" class='dateChoiceLink' data-datechoice='2070' data-choicenumber='<%= choice.number %>'>2070</a>
			<a href="#" class='dateChoiceLink' data-datechoice='2075' data-choicenumber='<%= choice.number %>'>2075</a>
			<a href="#" class='dateChoiceLink' data-datechoice='2080' data-choicenumber='<%= choice.number %>'>2080</a>
			<a href="#" class='dateChoiceLink' data-datechoice='2085' data-choicenumber='<%= choice.number %>'>2085</a>
			<a href="#" class='dateChoiceLink' data-datechoice='2090' data-choicenumber='<%= choice.number %>'>2090</a>
			<a href="#" class='dateChoiceLink' data-datechoice='2095' data-choicenumber='<%= choice.number %>'>2095</a>
			<a href="#" class='dateChoiceLink' data-datechoice='2100' data-choicenumber='<%= choice.number %>'>2100</a>
		  </div>
		</div>
		</div>
</div>
<div class="dates-column-center">&nbsp<div id="slider<%= choice.number %>"></div>
</div>


</div> <!-- dates column-->
</div>
 	      </td>

		  <% end %>
		  <% end %>
            </tr>
          <% end %>
        </table>
      </div>


      <input id="modeSwitchID" type="button" class="buttonMode" value="switch to 2100 mode" onclick="timeMode()">


      <!-- The Legend column -->

      <h6 class= "accordion-toggle">Legend</h6>

              <!-- <h5>Notes</h5> -->
        <table class="fixed" id='notes' style="font-size:x-small;text-align:justify;width:400px;border-spacing: 10px 2px;">
          <tr><td id='firstcell'><div class='help'>?</div></td><td>Question marks take you to one page descriptions of each choice</td></tr>
          <tr><td><div class='level1'>1</div></td><td>The least effort possible on this choice.</td></tr>
          <tr><td><div class='level2'>2</div></td><td>Viewed as ambitious, but reasonable by most experts.</td></tr>
          <tr><td><div class='level3'>3</div></td><td>Viewed as unlikely without significant change from the current system and/or significant technological breakthroughs</td></tr>
          <tr><td><div class='level4'>4</div></td><td>The upper end of what is thought to be physically plausible by the most optimistic observer.</td></tr>
<!--          <tr><td><div class='alternate'>A</div>&ndash;<div class='alternate'>D</div></td><td>A range of options where one alternative is not neccesiarily harder than another</td></tr>-->
          <tr class='primary_energy_notes'><td>Total used in the UK<sup>1</sup></td><td>Primary energy supply is normally higher than final energy demand, because of the energy used to generate electricity.</td></tr>
          <tr class='primary_energy_notes'><td>Targets<sup>2</sup></td><td>The targets up to 2027 exclude international aviation and shipping. They are also calculated as five year 'budgets', rather than the single year targets shown here.</td></tr>
          <tr class='primary_energy_notes'><td>Total<sup>3</sup></td><td>The total includes the reduction in emissions from carbon capture and storage and from growing new biomass to replace that used (the bioenergy credit).</td></tr>
      </table>
      </div>
      <!-- /accordion -->
      </div>

<!-- Switch for 2100 mode -->

<!--
<script>

var toggleSlider = document.getElementById('slider-toggle');

noUiSlider.create(toggleSlider, {
	orientation: "horizontal",
	start: 0,
	step: 1,
	range: {'min': [0, 1],'max': 1},
	format: wNumb({	decimals: 0})
})

/* FIXME: reset of start and end date for final model */
var wasVisible = 0; // Helper variable indicating that time mode wasn't active yet
toggleSlider.noUiSlider.on('update', function( values, handle ){
  if ( values[handle] === '1' ) {
		toggleSlider.classList.add('off');
		var change = 'visible';
    wasVisible = 1; // time mode is active
	} else {
		toggleSlider.classList.remove('off');
		var change = 'hidden';
    if (wasVisible == 1) {
    location.reload(); // reset time mode
    }
	}
	var good = document.getElementsByClassName('date-choice-mode-2100-wrapper');
	for (var i = 0; i < good.length; i++) {
		good[i].style.visibility = change;
    if (change=="visible") {
      good[i].classList.add("TimeModeVisible");
    } else {
      good[i].classList.remove("TimeModeVisible");
    }
	}
  console.log(good[0].classList);
});
</script>
<div style="margin-left:25px;">2100 mode<br><div id="slider-toggle" style="margin: 5px; height:10px; width:25px; background:LightGrey;top:-2px;"></div></div>

-->


<!-- End of Switch for 2100 mode -->

      </div>
    <!-- / eof navpanel -->
    </div>
    <!-- This is needed to show the tooltips, don't remove -->
    <div id='tooltip'></div>
    <div id='footer'>
      <!-- Change this to link to your country's website -->
      All the assumptions and calculations are available in a spreadsheet. Download <a href='/model.xlsx'>Excel <%= structure.reported_calculator_version %> <%= %></a> (<a href='http://2050-calculator-tool-wiki.decc.gov.uk/pages/140'>Version history</a>). The source code for this site is available under an open source licence from <a href='http://github.com/decc/twenty-fifty'>http://github.com/decc/twenty-fifty</a>
    </div>
    <!-- The following html is only displayed on screen when a user selects a particular view -->
    <div id='snippets'>
      <!-- This is shown the first time a user visits a costs page -->
      <div id='cost_caveats'>
        We would like your help to develop this tool. Please <a href="http://2050-calculator-tool-wiki.decc.gov.uk">click here</a> to find out more about our methodology and suggest improvements.  Before viewing the cost implications of your choices, please note that:
          <ol>
            <li> The Calculator expresses pathway costs as 'average pounds per person per year'. This is not the same as your energy bill. It is the cost of everything the UK buys that makes, converts, saves or uses energy: from kettles and insulation foam to trains and power stations. You can choose to see the results in different units when using the <a href=\"http://www.decc.gov.uk/2050\">excel version of the Calculator.</a> </li>
            <li>The Calculator does not choose any options automatically, regardless of their cost.</li>
            <li> The Calculator uses forecasts from credible sources of how technology and fuel costs might rise or fall over time. You vary these forecasts using the <a href="#" onclick="twentyfifty.switchView('costs_sensitivity'); return false;">cost sensitivity</a> implication from the menu on the top left. The full set of data points is available on the <a href="http://2050-calculator-tool-wiki.decc.gov.uk">wiki.</a> </li>
            <li>The cost of not tackling climate change is not included in the Calculator. The Stern review estimated that failing to tackle climate change could reduce global GDP by up to 20%. This is the equivalent of up to &pound;6,500 per person per year on average, on top of the cost of the energy system.</li>
            <li>Some other important effects have been excluded from the Calculator. The costs of travelling less or with different modes of transport, having colder homes or fewer goods, and changing the appearance of our houses or landscape are not included. Nor are profits, taxes, subsidies or economies of scale driven by pathway choices. The Calculator includes only the physical costs of constructing, operating and fuelling equipment.</li>
            <li>Costs are just one feature for comparing 2050 pathways. The Calculator provides information on other impacts, as well as some illustrative pathways to compare your choices with.</li>
          </ol>
          <div id='understand'>
            <a href="#" onclick="$.jStorage.set('CostCaveatShown',true);$('#cost_caveats').hide(); return false;">Click to continue using the calculator</a>
          </div>
        </div>
        <div id='air_quality_results'>
          <div class='airquality'>
            <h1>The impact of your pathway on air quality</h1>
            <div class='airqualitymessage' id='airqualitymessage'>
              The damage to human health arising from air pollution from this pathway, principally particulate matter, could be around <span id='airquality_range_start'></span><span id='airquality_range_end'></span> in 2050 compared to 2010. <span id='air_quality_worse'> Given the scope for adverse implications for air quality, if the UK were to adopt this pathway the Government  would develop a policy framweork that supported the innovation required to be at the bottom end of the range</span>
          </div>
            <div id='airquality'></div>
            <div class='airqualitymessage'>
              <h2>How to interpret these results:</h2>
              <ul>
                <li>Air pollution health impact index &mdash; this index measures the effect on human health from fine particulate matter and other air pollutants such as nitrogen oxides.  For example, these pollutants have been linked to premature death caused by heart and lung disease. 2010 is the baseline year (100). A number lower than 100 indicates a reduction in average air pollution and associated health impacts, whilst a higher number indicates an increase. This index reflects changes in the average concentration of air pollutants across the UK.  It does not provide information on the number or severity of pollution hotspots.</li>
                <li>High end of hatched range &mdash; worst case scenario for air pollution whereby there is no further deployment or innovation in pollution abatement technology between now and 2050 beyond planned measures.</li>
                <li>Low end of hatched range &mdash; best case scenario whereby innovation radically improves pollution abatement technology between now and 2050 and it is fully deployed.</li>
              </ul>
              <p>
              We would welcome your feedback on the
              <a href="http://2050-calculator-tool-wiki.decc.gov.uk/pages/80">methodology</a> used to calculate the impact of your pathway on air quality.
              You can also download the excel version of the 2050 pathways calcualtor to see the different types of air pollution and the relative importance of different sources.
              </p>
            </div>
          </div>
        </div>
        <div id="energysecurity">
          <div id="balancing" class="column">
            <h2>Balancing electricity supply and demand</h2>
            <p id='autobuild_text'><span id='pathway_balancing_ccgt'></span> GW of conventional gas electricity generation plant has been assumed to have been built by 2050, to cover the gap between average electricity demand and the amount of low carbon generation selected in this pathway.</p>
            <p>This tool does not model the hourly, daily or even seasonal operation of the electricity grid. It presents annual averages. Therefore it does not correctly represent the peaks and troughs of electricity demand.</p>
            <p>To go some way to addressing this flaw, the tool applies a simulated stress test to your pathway of five cold, almost windless, days. This is described in more detail <a href="/assets/onepage/49.pdf" target="_new">here</a>. In this case, the stress test implies that <span id='pathway_balancing_peaking'></span> GW of additional peaking plant may be required for supply to meet demand over that period.</p>
            <p>You can influence the amount of peaking plant by changing your choice level of 'storage, demand shifting &amp; interconnection' below right,or by reducing the amount of intermittent renewable generation, or by reducing the demand for electricity</p>
          </div>
          <div id="imports" class="column">
            <h2>Dependence on imported energy</h2>
            <p>The calculator assumes that any available biomass is preferred over fossil fuels and that domestically produced fuels are preferred over imports.It assumes that fossil fuels are imported to cover any shortfall.</p>
            <table id="imports">
              <tr><th class="description"></th><th colspan="2" class="year">2007</th><th></th><th colspan="2" class="year">2050</th></tr>
              <tr><th class="description">Imports</th><th class="value">TWh/yr</th><th class="value">%</th><th></th><th class="value">TWh/yr</th><th class="value">%</th></tr>
            </table>
          </div>
          <div id="diversity" class="column">
            <h2>Diversity of energy sources</h2>
            <p>There may be a benefit from maintaining a diversity of energy sources:</p>
            <table id="diversity">
              <tbody>
              <tr><th class="description">Proportion of energy supply</th><th class="year">2007</th><th></th><th class="year">2050</th></tr>
              </tbody>
            </table>
          </div>
          <div class="clear"></div>
        </div>
      </div>

</div>

<!-- bof Modal -->
<div id="settingsModal" class="modal fade" role="dialog" style=>
  <div class="modal-dialog">

    <!-- Modal content-->
    <div class="modal-content">
      <div class="modal-header">
        <button type="button" class="close" data-dismiss="modal">&times;</button>
        <h4 class="modal-title">Modal Header</h4>
      </div>
      <div class="modal-body">
        <p>Some text in the modal.</p>
      </div>
      <div class="modal-footer">
        <button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
      </div>
    </div>

  </div>
</div>
<!-- eof Modal -->


  </body>
</html>
